<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>رولت شانسی - نسخه 8 (پنجرهٔ ۵ تایی)</title>
<style>
  body{font-family:"Vazirmatn","Tahoma",sans-serif;background:#fffaf0;padding:18px;text-align:center;color:#111}
  .card{max-width:920px;margin:12px auto;padding:14px;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06)}
  button{padding:10px 16px;border-radius:8px;border:0;background:#0b7a54;color:#fff;cursor:pointer}
  select{font-size:18px;font-weight:bold;padding:10px}
  #wheel{display:flex;gap:8px;justify-content:center;align-items:center;height:90px;border-radius:10px;border:2px solid #0b7a54;overflow:hidden}
  .slot{min-width:180px;padding:8px 14px;border-radius:8px;background:transparent;font-weight:bold;font-size:18px;text-align:center;transition:transform .18s, color .18s}
  .center{font-size:22px}
  @keyframes blink{0%{color:gold}50%{color:transparent}100%{color:gold}}
  .instagram{display:flex;align-items:center;justify-content:center;gap:8px;text-decoration:none;color:#0b7a54;font-weight:bold}
</style>
</head>
<body>
<img src="https://photokade.com/wp-content/uploads/quran-graphy-photokade-com-22.jpg" style="max-width:220px;display:block;margin:10px auto">

<img src="https://www.tasvirezendegi.com/wp-content/uploads/2014/07/s308.gif" style="max-width:220px;display:block;margin:10px auto">



<div class="card">
  <label><b>انتخاب دستی سوره:</b></label><br>
  <select id="surahSelect"></select>
</div>

<div class="card">
  <button id="spinBtn">چرخاندن (انتخاب شانسی سوره)</button>
  <div id="wheel" style="margin-top:12px">
    <div class="slot" id="s0"></div>
    <div class="slot" id="s1"></div>
    <div class="slot center" id="s2"></div>
    <div class="slot" id="s3"></div>
    <div class="slot" id="s4"></div>
  </div>
</div>

<div class="card" style="display:flex;justify-content:center;gap:10px">
  <button id="showBtn">نمایش ترجمه</button>
  <button id="playBtn">پخش صوت</button>
</div>

<div class="card">
  <h3 id="surahTitle"></h3>
  <div id="translation" style="font-weight:bold;text-align:justify;line-height:1.9"></div>
  <audio id="audioPlayer" controls style="display:none"></audio>
</div>

<div class="card">
  <a class="instagram" href="https://instagram.com/itszolfi" target="_blank">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Instagram_logo_2022.svg/512px-Instagram_logo_2022.svg.png" style="width:20px;height:20px;margin-left:8px"> صفحه اینستاگرام سازنده ربات
  </a>
</div>

<script>
const surahNames=["الفاتحه","البقره","آل‌عمران","النساء","المائده","الانعام","الاعراف","الانفال","التوبه","یونس","هود","یوسف","الرعد","ابراهیم","الحجر","النحل","الاسراء","الکهف","مریم","طه","الانبیاء","الحج","المؤمنون","النور","الفرقان","الشعراء","النمل","القصص","العنکبوت","الروم","لقمان","السجده","الاحزاب","سبأ","فاطر","یس","الصافات","ص","الزمر","غافر","فصلت","الشوری","الزخرف","الدخان","الجاثیه","الاحقاف","محمد","الفتح","الحجرات","ق","الذاریات","الطور","النجم","القمر","الرحمن","الواقعه","الحدید","المجادله","الحشر","الممتحنه","الصف","الجمعة","المنافقون","التغابن","الطلاق","التحریم","الملک","القلم","الحاقه","المعارج","نوح","الجن","المزمل","المدثر","القیامه","الانسان","المرسلات","النبأ","النازعات","عبس","التکویر","الانفطار","المطففین","الانشقاق","البروج","الطارق","الاعلی","الغاشیه","الفجر","البلد","الشمس","اللیل","الضحی","الشرح","التین","العلق","القدر","البینه","الزلزله","العادیات","القارعه","التکاثر","العصر","الهمزه","الفیل","قریش","الماعون","الکوثر","الکافرون","النصر","المسد","الاخلاص","الفلق","الناس"];
const surahEn=["Fatiha","Baqarah","AalImran","Nisa","Maidah","Anam","Araf","Anfal","Tawbah","Yunus","Hud","Yusuf","Rad","Ibrahim","Hijr","Nahl","Isra","Kahf","Maryam","Taha","Anbiya","Hajj","Muminun","Nur","Furqan","Shuara","Naml","Qasas","Ankabut","Rum","Luqman","Sajdah","Ahzab","Saba","Fatir","YaaSin","Saffat","Saad","Zumar","Ghafir","Fussilat","Shura","Zukhruf","Dukhan","Jathiyah","Ahqaf","Muhammad","Fath","Hujurat","Qaf","Dhariyat","Tur","Najm","Qamar","Rahman","Waqiah","Hadid","Mujadilah","Hashr","Mumtahinah","Saff","Jumuah","Munafiqun","Taghabun","Talaq","Tahrim","Mulk","Qalam","Haqqah","Maarij","Nuh","Jinn","Muzammil","Mudathir","Qiyamah","Insan","Mursalat","Naba","Naziat","Abasa","Takwir","Infitar","Mutaffifin","Inshiqaq","Buruj","Tariq","Alaa","Ghashiyah","Fajr","Balad","Shams","Layl","Dhuha","Sharh","Tin","Alaq","Qadr","Baiyinah","Zalzalah","Adiyat","Qariah","Takathur","Asr","Humazah","Fil","Quraysh","Maaun","Kauthar","Kafirun","Nasr","Masad","Ikhlas","Falaq","Nas"];

const sel = document.getElementById('surahSelect');
const slots = [document.getElementById('s0'),document.getElementById('s1'),document.getElementById('s2'),document.getElementById('s3'),document.getElementById('s4')];
const spinBtn = document.getElementById('spinBtn');
const showBtn = document.getElementById('showBtn');
const playBtn = document.getElementById('playBtn');
const audio = document.getElementById('audioPlayer');
const translation = document.getElementById('translation');
const titleEl = document.getElementById('surahTitle');

// پر کردن منوی انتخاب دستی
surahNames.forEach((s,i)=>{
  const o=document.createElement('option'); o.value=i+1; o.textContent=`${i+1}. ${s}`; o.style.fontWeight='bold'; sel.appendChild(o);
});
sel.value = 1;

// init 5 slots قبل از چرخاندن
slots[0].textContent = surahNames[0];
slots[1].textContent = surahNames[1];
slots[2].textContent = surahNames[0]; // مرکز رولت پیش‌فرض الفاتحه
slots[3].textContent = surahNames[3];
slots[4].textContent = surahNames[4];

async function fetchTranslation(num){
  translation.textContent='در حال دریافت ترجمه...';
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${num}/fa.ansarian`);
    const j=await r.json();
    const ay=j.data.ayahs.map(a=>`${a.numberInSurah}. ${a.text}`);
    translation.innerHTML = ay.join('<br><br>');
    titleEl.textContent = `${num}. ${surahNames[num-1]}`;
  }catch(e){ translation.textContent='خطا در بارگذاری ترجمه.'; }
}

function playAudio(num){
  audio.src = `https://quranmehr.ir/files/audio/${num}-${surahEn[num-1]}.mp3`;
  audio.style.display='block';
  audio.play().catch(()=>{});
}

showBtn.onclick = ()=>fetchTranslation(sel.value);
playBtn.onclick = ()=>playAudio(sel.value);

// spin: پنجره 5 تا
spinBtn.addEventListener('click', ()=>{
  spinBtn.disabled = true;
  const total = surahNames.length;
  const chosen = Math.floor(Math.random()*total);
  const rouletteSound = new Audio('https://raw.githubusercontent.com/itsbehnamz/bottest/main/mixkit-slot-machine-payout-alarm-1996.wav');
  rouletteSound.play().catch(()=>{});
  
  let sequence = [];
  const finalIndex = 40;
  const start = (chosen - finalIndex + total*10) % total;
  for(let i=0;i<finalIndex+5;i++) sequence.push(surahNames[(start+i)%total]);

  let i=0;
  function step(){
    for(let s=0;s<5;s++){
      const idx = i + s;
      slots[s].textContent = sequence[idx % sequence.length];
      slots[s].style.color = (s===2)?'#111':'hsl('+((i+s)*12%360)+',85%,45%)';
      slots[s].style.transform = (s===2)?'scale(1.06)':'scale(1)';
    }
    i++;
    const delay = Math.min(160, 20 + Math.pow(i,1.4));
    if(i < sequence.length) setTimeout(step, delay);
    else {
      slots[2].textContent = surahNames[chosen];
      slots[2].style.animation = 'blink 1s infinite';
      slots[2].style.color = 'gold';
      sel.value = chosen+1;
      fetchTranslation(chosen+1);
      playAudio(chosen+1);
      setTimeout(()=>{ spinBtn.disabled=false; },700);
    }
  }
  step();
});
</script>







<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ربات قرآن فارسی بهنام مهر ۱۴۰۴</title>
<style>
#statsBox {
  display:none;
  white-space: pre-wrap;
  background:#f9f9f9;
  border:1px solid #ccc;
  padding:12px;
  margin-top:12px;
  font-family:Tahoma,Arial;
  max-height:500px;
  overflow:auto;
}
</style>
</head>
<body>

<a id="creatorLink" href="https://instagram.com/itszolfi" target="_blank" style="display:none;"></a>

<button id="showStatsBtn" style="margin:8px;padding:8px 12px;border-radius:6px;border:0;cursor:pointer;">ربات قرآن فارسی بهنام مهر ۱۴۰۴</button>

<div id="statsBox"></div>

<!-- UA-Parser.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/1.0.2/ua-parser.min.js"></script>

<script>
const PASSWORD = "123myramzamar";
const CLICK_LOG_KEY = 'bottest_creator_clicks_v6';
const VISIT_LOG_KEY = 'bottest_visit_log_v6';

function loadVisitLog(){ try{ return JSON.parse(localStorage.getItem(VISIT_LOG_KEY)||'[]'); } catch(e){ return []; } }
function saveVisitLog(arr){ localStorage.setItem(VISIT_LOG_KEY, JSON.stringify(arr)); }
function loadClickLog(){ try{ return JSON.parse(localStorage.getItem(CLICK_LOG_KEY)||'[]'); } catch(e){ return []; } }
function saveClickLog(arr){ localStorage.setItem(CLICK_LOG_KEY, JSON.stringify(arr)); }

async function recordVisit(){
  let data = {ts: Date.now(), ua:navigator.userAgent || '', ip:'', country:'', city:'', region:'', zip:'', isp:'', duration:0, device:''};
  try { 
    const res = await fetch('https://ipwhois.app/json/');
    const info = await res.json();
    data.ip = info.ip||'';
    data.country = info.country||'';
    data.city = info.city||'';
    data.region = info.region||'';
    data.zip = info.postal||'';
    data.isp = info.org||'';
  } catch(e){ console.warn('خطا در دریافت اطلاعات IP:', e); }

  // تشخیص تقریبی دستگاه
  const parser = new UAParser();
  const device = parser.getDevice();
  if(device.model || device.vendor) data.device = ((device.vendor||'') + ' ' + (device.model||'')).trim();
  else data.device = 'نامشخص';
  
  const arr = loadVisitLog(); arr.push(data); if(arr.length>500) arr.splice(0,arr.length-500); saveVisitLog(arr);
  window.addEventListener('beforeunload',()=>{ const endTime = Date.now(); const arr2 = loadVisitLog(); const last=arr2[arr2.length-1]; if(last && last.ts===data.ts) last.duration=Math.round((endTime-last.ts)/1000); saveVisitLog(arr2); });
}

function recordCreatorClick(){ const arr = loadClickLog(); arr.push({ts: Date.now(), ua: navigator.userAgent||''}); if(arr.length>500) arr.splice(0,arr.length-500); saveClickLog(arr); }
function getClickSummary(){ const arr=loadClickLog(); return {totalClicks:arr.length,lastClick:arr.length?arr[arr.length-1].ts:null,firstClick:arr.length?arr[0].ts:null,last20:arr.slice(-20).reverse()}; }

function showStats(){
  const p = prompt('رمز را وارد کنید:');
  if(p===null) return;
  if(p!==PASSWORD){ alert('رمز اشتباه است.'); return; }
  const click = getClickSummary();
  let msg = `تعداد کل کلیک‌ها روی لینک سازنده: ${click.totalClicks}\n`;
  if(click.lastClick) msg+= `اولین کلیک: ${new Date(click.firstClick).toLocaleString()}\nآخرین کلیک: ${new Date(click.lastClick).toLocaleString()}\n`;
  msg+='آخرین 20 کلیک (جدید به قدیم):\n';
  click.last20.forEach((it,idx)=>{ msg+= `${idx+1}. ${new Date(it.ts).toLocaleString()} — UA: ${it.ua.slice(0,80)}\n`; });
  const visits=loadVisitLog();
  msg+='\nبازدیدکنندگان (آخرین 20 بازدید):\n';
  visits.slice(-20).reverse().forEach((v,idx)=>{ 
    msg+=`${idx+1}. زمان: ${new Date(v.ts).toLocaleString()}, کشور: ${v.country}, شهر: ${v.city}, منطقه: ${v.region}, کدپستی: ${v.zip}, ISP: ${v.isp}, مدل دستگاه تقریبی: ${v.device}, مرورگر و نسخه: ${v.ua.slice(0,80)}, مدت حضور: ${v.duration||0} ثانیه\n`; 
  });
  const box=document.getElementById('statsBox'); box.style.display='block'; box.textContent=msg;
}

document.getElementById('showStatsBtn').addEventListener('click', showStats);
document.getElementById('creatorLink').addEventListener('click', recordCreatorClick);
recordVisit();
</script>

</body>
</html>







</body>
</html>