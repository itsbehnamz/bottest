<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Arcade Bot</title>
<style>
  body {margin:0; overflow:hidden; background:#000; color:#fff; font-family:sans-serif;}
  canvas {display:block; margin:0 auto; background:radial-gradient(circle at center, #111, #000);}
  #controls {position:fixed; bottom:20px; left:0; width:100%; text-align:center;}
  button {background:#333; color:#fff; font-size:24px; margin:0 10px; padding:10px 30px; border:none; border-radius:12px; box-shadow:0 0 10px #0ff; transition:0.2s;}
  button:active {background:#0ff; color:#000;}
</style>
</head>
<body>
<canvas id="game" width="480" height="640"></canvas>
<div id="controls">
  <button id="left">⬅️</button>
  <button id="right">➡️</button>
</div>
<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
let player={x:220,y:580,w:40,h:40,speed:5,dx:0};
let stars=[],enemies=[],score=0,gameOver=false;
let collectSound=new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");
let hitSound=new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
let buttonSound=new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

function createStar(){
  stars.push({x:Math.random()*440,y:-10,w:10,h:10,speed:2+Math.random()*2});
}
function createEnemy(){
  enemies.push({x:Math.random()*440,y:-40,w:40,h:40,speed:2+Math.random()*2});
}
function drawPlayer(){
  ctx.fillStyle="#0ff";
  ctx.fillRect(player.x,player.y,player.w,player.h);
}
function drawStars(){
  ctx.fillStyle="#ff0";
  stars.forEach(s=>ctx.fillRect(s.x,s.y,s.w,s.h));
}
function drawEnemies(){
  ctx.fillStyle="#f00";
  enemies.forEach(e=>ctx.fillRect(e.x,e.y,e.w,e.h));
}
function movePlayer(){
  player.x+=player.dx;
  if(player.x<0)player.x=0;
  if(player.x>canvas.width-player.w)player.x=canvas.width-player.w;
}
function updateStars(){
  for(let i=stars.length-1;i>=0;i--){
    stars[i].y+=stars[i].speed;
    if(stars[i].y>640)stars.splice(i,1);
    else if(collides(player,stars[i])){
      collectSound.currentTime=0;collectSound.play();
      stars.splice(i,1);score++;
    }
  }
}
function updateEnemies(){
  for(let i=enemies.length-1;i>=0;i--){
    enemies[i].y+=enemies[i].speed;
    if(enemies[i].y>640)enemies.splice(i,1);
    else if(collides(player,enemies[i])){
      hitSound.currentTime=0;hitSound.play();
      gameOver=true;
    }
  }
}
function collides(a,b){
  return a.x<b.x+b.w && a.x+a.w>b.x && a.y<b.y+b.h && a.y+a.h>b.y;
}
function drawScore(){
  ctx.font="20px Arial";
  ctx.fillStyle="#fff";
  ctx.fillText("امتیاز: "+score,10,30);
}
function loop(){
  ctx.clearRect(0,0,480,640);
  drawPlayer();drawStars();drawEnemies();drawScore();
  movePlayer();updateStars();updateEnemies();
  if(Math.random()<0.03)createStar();
  if(Math.random()<0.02)createEnemy();
  if(!gameOver)requestAnimationFrame(loop);
  else{
    ctx.font="40px Arial";ctx.fillStyle="#f00";
    ctx.fillText("پایان بازی!",140,320);
  }
}
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft')player.dx=-player.speed;
  if(e.key==='ArrowRight')player.dx=player.speed;
});
document.addEventListener('keyup',e=>{
  if(e.key==='ArrowLeft'||e.key==='ArrowRight')player.dx=0;
});
document.getElementById('left').onclick=()=>{
  buttonSound.currentTime=0;buttonSound.play();
  player.dx=-player.speed;setTimeout(()=>player.dx=0,150);
};
document.getElementById('right').onclick=()=>{
  buttonSound.currentTime=0;buttonSound.play();
  player.dx=player.speed;setTimeout(()=>player.dx=0,150);
};
loop();
</script>
</body>
</html>