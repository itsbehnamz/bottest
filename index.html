<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>رولت شانسی - نسخه 8 (پنجرهٔ ۵ تایی)</title>
<style>
  body{font-family:"Vazirmatn","Tahoma",sans-serif;background:#fffaf0;padding:18px;text-align:center;color:#111}
  .card{max-width:920px;margin:12px auto;padding:14px;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06)}
  button{padding:10px 16px;border-radius:8px;border:0;background:#0b7a54;color:#fff;cursor:pointer}
  select{font-size:18px;font-weight:bold;padding:10px}
  #wheel{display:flex;gap:8px;justify-content:center;align-items:center;height:90px;border-radius:10px;border:2px solid #0b7a54;overflow:hidden}
  .slot{min-width:180px;padding:8px 14px;border-radius:8px;background:transparent;font-weight:bold;font-size:18px;text-align:center;transition:transform .18s, color .18s}
  .center{font-size:22px}
  @keyframes blink{0%{color:gold}50%{color:transparent}100%{color:gold}}
  .instagram{display:flex;align-items:center;justify-content:center;gap:8px;text-decoration:none;color:#0b7a54;font-weight:bold}
</style>

</head>

<body>

  <!-- عکس مستطیلی بالای انتخاب دستی -->
  <div style="width:100%; height:80px; margin-bottom:10px;">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQgzx-O8s68ajzdjd6E8VnYUvdfn8b9GZvAhGC2ZavKCg&s=10" 
         alt="عکس بالای انتخاب دستی" 
         style="width:100%; height:100%; object-fit:cover; border-radius:100px;">




<div class="card">
  <label><b>انتخاب دستی سوره:</b></label><br>
  <select id="surahSelect"></select>
</div>

<div class="card">
  <button id="spinBtn">چرخاندن (انتخاب شانسی سوره)</button>
  <div id="wheel" style="margin-top:12px">
    <div class="slot" id="s0"></div>
    <div class="slot" id="s1"></div>
    <div class="slot center" id="s2"></div>
    <div class="slot" id="s3"></div>
    <div class="slot" id="s4"></div>
  </div>
</div>

<div class="card" style="display:flex;justify-content:center;gap:10px">
  <button id="showBtn">نمایش ترجمه</button>
  <button id="playBtn">پخش صوت</button>
</div>

<div class="card">
  <h3 id="surahTitle"></h3>
  <div id="translation" style="font-weight:bold;text-align:justify;line-height:1.9"></div>
  <audio id="audioPlayer" controls style="display:none"></audio>
</div>




<script>
// لیست 114 سوره فارسی
const surahNames=[
"الفاتحه","البقره","آل‌عمران","النساء","المائده","الانعام","الاعراف","الانفال","التوبه🖤","یونس",
"هود","یوسف🤍","الرعد","ابراهیم♥️","الحجر","النحل","الاسراء","الکهف","مریم♥️","طه","الانبیاء♥️","الحج",
"المؤمنون♥️","النور💛","الفرقان","الشعراء","النمل","القصص","العنکبوت","الروم","لقمان♥️","السجده🤍","الاحزاب",
"سبأ","فاطر","یس♥️","الصافات","ص","الزمر","غافر","فصلت","الشوری","الزخرف","الدخان","الجاثیه","الاحقاف",
"محمد♥️","الفتح","الحجرات","ق","الذاریات","الطور","النجم","القمر","الرحمن♥️","الواقعه🖤","الحدید","المجادله",
"الحشر","الممتحنه","الصف","الجمعة","المنافقون🖤","التغابن","الطلاق","التحریم","الملک♥️","القلم","الحاقه",
"المعارج","نوح♥️","الجن","المزمل","المدثر","القیامه","الانسان","المرسلات","النبأ","النازعات","عبس","التکویر",
"الانفطار","المطففین","الانشقاق","البروج","الطارق","الاعلی","الغاشیه","الفجر","البلد","الشمس💛","اللیل",
"الضحی","الشرح","التین","العلق","القدر♥️","البینه","الزلزله🖤","العادیات","القارعه","التکاثر","العصر","الهمزه",
"الفیل","قریش","الماعون","الکوثر♥️","الکافرون🖤","النصر","المسد","الاخلاص","الفلق","الناس"
];




const surahEn=["Fatiha","Baqarah","AalImran","Nisa","Maidah","Anam","Araf","Anfal","Tawbah","Yunus","Hud","Yusuf","Rad","Ibrahim","Hijr","Nahl","Isra","Kahf","Maryam","Taha","Anbiya","Hajj","Muminun","Nur","Furqan","Shuara","Naml","Qasas","Ankabut","Rum","Luqman","Sajdah","Ahzab","Saba","Fatir","YaaSin","Saffat","Saad","Zumar","Ghafir","Fussilat","Shura","Zukhruf","Dukhan","Jathiyah","Ahqaf","Muhammad","Fath","Hujurat","Qaf","Dhariyat","Tur","Najm","Qamar","Rahman","Waqiah","Hadid","Mujadilah","Hashr","Mumtahinah","Saff","Jumuah","Munafiqun","Taghabun","Talaq","Tahrim","Mulk","Qalam","Haqqah","Maarij","Nuh","Jinn","Muzammil","Mudathir","Qiyamah","Insan","Mursalat","Naba","Naziat","Abasa","Takwir","Infitar","Mutaffifin","Inshiqaq","Buruj","Tariq","Alaa","Ghashiyah","Fajr","Balad","Shams","Layl","Dhuha","Sharh","Tin","Alaq","Qadr","Baiyinah","Zalzalah","Adiyat","Qariah","Takathur","Asr","Humazah","Fil","Quraysh","Maaun","Kauthar","Kafirun","Nasr","Masad","Ikhlas","Falaq","Nas"];

const sel = document.getElementById('surahSelect');
const slots = [document.getElementById('s0'),document.getElementById('s1'),document.getElementById('s2'),document.getElementById('s3'),document.getElementById('s4')];
const spinBtn = document.getElementById('spinBtn');
const showBtn = document.getElementById('showBtn');
const playBtn = document.getElementById('playBtn');
const audio = document.getElementById('audioPlayer');
const translation = document.getElementById('translation');
const titleEl = document.getElementById('surahTitle');

// پر کردن منوی انتخاب دستی
surahNames.forEach((s,i)=>{
  const o=document.createElement('option'); o.value=i+1; o.textContent=`${i+1}. ${s}`; o.style.fontWeight='bold'; sel.appendChild(o);
});
sel.value = 1;

// init 5 slots قبل از چرخاندن
slots[0].textContent = surahNames[0];
slots[1].textContent = surahNames[1];
slots[2].textContent = surahNames[0]; // مرکز رولت پیش‌فرض الفاتحه
slots[3].textContent = surahNames[3];
slots[4].textContent = surahNames[4];

async function fetchTranslation(num){
  translation.textContent='در حال دریافت ترجمه...';
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${num}/fa.ansarian`);
    const j=await r.json();
    const ay=j.data.ayahs.map(a=>`${a.numberInSurah}. ${a.text}`);
    translation.innerHTML = ay.join('<br><br>');
    titleEl.textContent = `${num}. ${surahNames[num-1]}`;
  }catch(e){ translation.textContent='خطا در بارگذاری ترجمه.'; }
}

function playAudio(num){
  audio.src = `https://quranmehr.ir/files/audio/${num}-${surahEn[num-1]}.mp3`;
  audio.style.display='block';
  audio.play().catch(()=>{});
}

showBtn.onclick = ()=>fetchTranslation(sel.value);
playBtn.onclick = ()=>playAudio(sel.value);

// spin: پنجره 5 تا
spinBtn.addEventListener('click', ()=>{
  spinBtn.disabled = true;
  const total = surahNames.length;
  const chosen = Math.floor(Math.random()*total);
  const rouletteSound = new Audio('https://raw.githubusercontent.com/itsbehnamz/bottest/main/mixkit-slot-machine-payout-alarm-1996.wav');
  rouletteSound.play().catch(()=>{});
  
  let sequence = [];
  const finalIndex = 40;
  const start = (chosen - finalIndex + total*10) % total;
  for(let i=0;i<finalIndex+5;i++) sequence.push(surahNames[(start+i)%total]);

  let i=0;
  function step(){
    for(let s=0;s<5;s++){
      const idx = i + s;
      slots[s].textContent = sequence[idx % sequence.length];
      slots[s].style.color = (s===2)?'#111':'hsl('+((i+s)*12%360)+',85%,45%)';
      slots[s].style.transform = (s===2)?'scale(1.06)':'scale(1)';
    }
    i++;
    const delay = Math.min(160, 20 + Math.pow(i,1.4));
    if(i < sequence.length) setTimeout(step, delay);
    else {
      slots[2].textContent = surahNames[chosen];
      slots[2].style.animation = 'blink 1s infinite';
      slots[2].style.color = 'gold';
      sel.value = chosen+1;
      fetchTranslation(chosen+1);
      playAudio(chosen+1);
      setTimeout(()=>{ spinBtn.disabled=false; },700);
    }
  }
  step();
});
</script>

</body>
</html>






<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>حدیث با ترجمه فارسی</title>
  <style>
    #hadithTop {
      position: fixed;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
      z-index: 9999;
      max-width: 95%;
      width: min(900px, 95%);
      padding: 12px 16px;
      margin-top: 8px;
      background: rgba(255,255,255,0.92);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
      border-radius: 10px;
      text-align: center;
      font-weight: 700;
      font-family: Tahoma, "Helvetica Neue", Arial, sans-serif;
      line-height: 1.4;
      color: #111;
      pointer-events: none;
    }
    #hadithTop .text { display:block; font-size:16px; }
    #hadithTop .meta { display:block; font-size:12px; margin-top:6px; font-weight:600; opacity:0.8; }
    @media (max-width:420px){ #hadithTop{ font-size:14px; padding:10px; } }
  </style>
</head>
<body>

<div id="hadithTop" aria-live="polite">
  <span class="text">در حال دریافت...</span>
  <span class="meta"></span>
</div>

<script>
(async function(){
  const hadithTop = document.getElementById('hadithTop');
  const textEl = hadithTop.querySelector('.text');
  const metaEl = hadithTop.querySelector('.meta');

  const CDN_BASE = 'https://cdn.jsdelivr.net/gh/fawazahmed0/hadith-api@1';
  const EDITIONS_URL = CDN_BASE + '/editions.min.json';
  const CORS_PROXY = 'https://api.allorigins.win/raw?url='; // fallback

  async function fetchWithCors(url) {
    try {
      const res = await fetch(url);
      if(!res.ok) throw new Error('HTTP '+res.status);
      return await res.json();
    } catch {
      const proxied = CORS_PROXY + encodeURIComponent(url);
      const res2 = await fetch(proxied);
      if(!res2.ok) throw new Error('Proxy HTTP '+res2.status);
      const text = await res2.text();
      try { return JSON.parse(text); } catch(e){ return text; }
    }
  }

  async function translateToFarsi(text) {
    try {
      const res = await fetch('https://libretranslate.de/translate', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({q:text,source:'en',target:'fa',format:'text'})
      });
      const data = await res.json();
      return data.translatedText || text;
    } catch(e){
      console.error('Translation error:', e);
      return text;
    }
  }

  async function showRandomHadith(){
    try {
      const editions = await fetchWithCors(EDITIONS_URL);
      const pool = Array.isArray(editions)?editions: [];
      if(!pool.length) throw new Error('No editions found');
      const pickEdition = pool[Math.floor(Math.random()*pool.length)];
      const editionName = pickEdition.edition||pickEdition.name||pickEdition.file||pickEdition.id||pickEdition;
      const editionUrls = [`${CDN_BASE}/editions/${editionName}.min.json`, `${CDN_BASE}/editions/${editionName}.json`];
      let editionData = null;
      for(const url of editionUrls){
        try{ editionData = await fetchWithCors(url); break; }catch{}
      }
      if(!editionData) throw new Error('Edition data not found');

      let hadithList = Array.isArray(editionData)?editionData: editionData.hadiths||editionData.data||[];
      if(!hadithList.length){
        for(const k in editionData){ if(Array.isArray(editionData[k])){ hadithList = editionData[k]; break; } }
      }
      if(!hadithList.length) throw new Error('No hadiths in edition');

      const chosen = hadithList[Math.floor(Math.random()*hadithList.length)];
      let text = chosen.text || chosen.body || chosen.hadith || chosen.content || chosen.arabic || chosen.english || '';
      if(!text){
        if(typeof chosen === 'string') text=chosen;
        else{
          for(const key of ['english','en','translation','text','hadith','body','content','arabic']){
            if(chosen[key] && typeof chosen[key]==='string'){ text=chosen[key]; break; }
          }
        }
      }

      // ترجمه به فارسی
      const textFa = await translateToFarsi(text);

      let meta = '';
      const refs = [];
      if(chosen.book) refs.push(chosen.book);
      if(chosen.chapter) refs.push(chosen.chapter);
      if(chosen.reference) refs.push(chosen.reference);
      if(chosen.grade) refs.push(chosen.grade);
      if(chosen.hadith_number) refs.push('#'+chosen.hadith_number);
      if(chosen.id) refs.push(chosen.id);
      if(refs.length) meta=refs.join(' • ');

      textEl.textContent = textFa;
      metaEl.textContent = meta;

    } catch(e){
      console.error('Hadith fetch/translate error:', e);
      textEl.textContent = 'خطا در دریافت حدیث — لطفاً بعداً امتحان کنید.';
      metaEl.textContent='';
    }
  }

  if(document.readyState==='loading') document.addEventListener('DOMContentLoaded',showRandomHadith);
  else showRandomHadith();
})();
</script>

</body>
</html>