<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>رولت شانسی - نسخه 8 (پنجرهٔ ۵ تایی)</title>
<style>
  body{font-family:"Vazirmatn","Tahoma",sans-serif;background:#fffaf0;padding:18px;text-align:center;color:#111}
  .card{max-width:920px;margin:12px auto;padding:14px;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06)}
  button{padding:10px 16px;border-radius:8px;border:0;background:#0b7a54;color:#fff;cursor:pointer}
  select{font-size:18px;font-weight:bold;padding:10px}
  #wheel{display:flex;gap:8px;justify-content:center;align-items:center;height:90px;border-radius:10px;border:2px solid #0b7a54;overflow:hidden}
  .slot{min-width:180px;padding:8px 14px;border-radius:8px;background:transparent;font-weight:bold;font-size:18px;text-align:center;transition:transform .18s, color .18s}
  .center{font-size:22px}
  @keyframes blink{0%{color:gold}50%{color:transparent}100%{color:gold}}
  .instagram{display:flex;align-items:center;justify-content:center;gap:8px;text-decoration:none;color:#0b7a54;font-weight:bold}
</style>
</head>
<body>


<div class="card">
  <label><b>انتخاب دستی سوره:</b></label><br>
  <select id="surahSelect"></select>
</div>

<div class="card">
  <button id="spinBtn">چرخاندن (انتخاب شانسی سوره)</button>
  <div id="wheel" style="margin-top:12px">
    <div class="slot" id="s0"></div>
    <div class="slot" id="s1"></div>
    <div class="slot center" id="s2"></div>
    <div class="slot" id="s3"></div>
    <div class="slot" id="s4"></div>
  </div>
</div>

<div class="card" style="display:flex;justify-content:center;gap:10px">
  <button id="showBtn">نمایش ترجمه</button>
  <button id="playBtn">پخش صوت</button>
</div>

<div class="card">
  <h3 id="surahTitle"></h3>
  <div id="translation" style="font-weight:bold;text-align:justify;line-height:1.9"></div>
  <audio id="audioPlayer" controls style="display:none"></audio>
</div>





<script>
const surahNames=["الفاتحه","البقره","آل‌عمران","النساء","المائده","الانعام","الاعراف","الانفال","التوبه","یونس","هود","یوسف","الرعد","ابراهیم","الحجر","النحل","الاسراء","الکهف","مریم","طه","الانبیاء","الحج","المؤمنون","النور","الفرقان","الشعراء","النمل","القصص","العنکبوت","الروم","لقمان","السجده","الاحزاب","سبأ","فاطر","یس","الصافات","ص","الزمر","غافر","فصلت","الشوری","الزخرف","الدخان","الجاثیه","الاحقاف","محمد","الفتح","الحجرات","ق","الذاریات","الطور","النجم","القمر","الرحمن","الواقعه","الحدید","المجادله","الحشر","الممتحنه","الصف","الجمعة","المنافقون","التغابن","الطلاق","التحریم","الملک","القلم","الحاقه","المعارج","نوح","الجن","المزمل","المدثر","القیامه","الانسان","المرسلات","النبأ","النازعات","عبس","التکویر","الانفطار","المطففین","الانشقاق","البروج","الطارق","الاعلی","الغاشیه","الفجر","البلد","الشمس","اللیل","الضحی","الشرح","التین","العلق","القدر","البینه","الزلزله","العادیات","القارعه","التکاثر","العصر","الهمزه","الفیل","قریش","الماعون","الکوثر","الکافرون","النصر","المسد","الاخلاص","الفلق","الناس"];
const surahEn=["Fatiha","Baqarah","AalImran","Nisa","Maidah","Anam","Araf","Anfal","Tawbah","Yunus","Hud","Yusuf","Rad","Ibrahim","Hijr","Nahl","Isra","Kahf","Maryam","Taha","Anbiya","Hajj","Muminun","Nur","Furqan","Shuara","Naml","Qasas","Ankabut","Rum","Luqman","Sajdah","Ahzab","Saba","Fatir","YaaSin","Saffat","Saad","Zumar","Ghafir","Fussilat","Shura","Zukhruf","Dukhan","Jathiyah","Ahqaf","Muhammad","Fath","Hujurat","Qaf","Dhariyat","Tur","Najm","Qamar","Rahman","Waqiah","Hadid","Mujadilah","Hashr","Mumtahinah","Saff","Jumuah","Munafiqun","Taghabun","Talaq","Tahrim","Mulk","Qalam","Haqqah","Maarij","Nuh","Jinn","Muzammil","Mudathir","Qiyamah","Insan","Mursalat","Naba","Naziat","Abasa","Takwir","Infitar","Mutaffifin","Inshiqaq","Buruj","Tariq","Alaa","Ghashiyah","Fajr","Balad","Shams","Layl","Dhuha","Sharh","Tin","Alaq","Qadr","Baiyinah","Zalzalah","Adiyat","Qariah","Takathur","Asr","Humazah","Fil","Quraysh","Maaun","Kauthar","Kafirun","Nasr","Masad","Ikhlas","Falaq","Nas"];

const sel = document.getElementById('surahSelect');
const slots = [document.getElementById('s0'),document.getElementById('s1'),document.getElementById('s2'),document.getElementById('s3'),document.getElementById('s4')];
const spinBtn = document.getElementById('spinBtn');
const showBtn = document.getElementById('showBtn');
const playBtn = document.getElementById('playBtn');
const audio = document.getElementById('audioPlayer');
const translation = document.getElementById('translation');
const titleEl = document.getElementById('surahTitle');

// پر کردن منوی انتخاب دستی
surahNames.forEach((s,i)=>{
  const o=document.createElement('option'); o.value=i+1; o.textContent=`${i+1}. ${s}`; o.style.fontWeight='bold'; sel.appendChild(o);
});
sel.value = 1;

// init 5 slots قبل از چرخاندن
slots[0].textContent = surahNames[0];
slots[1].textContent = surahNames[1];
slots[2].textContent = surahNames[0]; // مرکز رولت پیش‌فرض الفاتحه
slots[3].textContent = surahNames[3];
slots[4].textContent = surahNames[4];

async function fetchTranslation(num){
  translation.textContent='در حال دریافت ترجمه...';
  try{
    const r=await fetch(`https://api.alquran.cloud/v1/surah/${num}/fa.ansarian`);
    const j=await r.json();
    const ay=j.data.ayahs.map(a=>`${a.numberInSurah}. ${a.text}`);
    translation.innerHTML = ay.join('<br><br>');
    titleEl.textContent = `${num}. ${surahNames[num-1]}`;
  }catch(e){ translation.textContent='خطا در بارگذاری ترجمه.'; }
}

function playAudio(num){
  audio.src = `https://quranmehr.ir/files/audio/${num}-${surahEn[num-1]}.mp3`;
  audio.style.display='block';
  audio.play().catch(()=>{});
}

showBtn.onclick = ()=>fetchTranslation(sel.value);
playBtn.onclick = ()=>playAudio(sel.value);

// spin: پنجره 5 تا
spinBtn.addEventListener('click', ()=>{
  spinBtn.disabled = true;
  const total = surahNames.length;
  const chosen = Math.floor(Math.random()*total);
  const rouletteSound = new Audio('https://raw.githubusercontent.com/itsbehnamz/bottest/main/mixkit-slot-machine-payout-alarm-1996.wav');
  rouletteSound.play().catch(()=>{});
  
  let sequence = [];
  const finalIndex = 40;
  const start = (chosen - finalIndex + total*10) % total;
  for(let i=0;i<finalIndex+5;i++) sequence.push(surahNames[(start+i)%total]);

  let i=0;
  function step(){
    for(let s=0;s<5;s++){
      const idx = i + s;
      slots[s].textContent = sequence[idx % sequence.length];
      slots[s].style.color = (s===2)?'#111':'hsl('+((i+s)*12%360)+',85%,45%)';
      slots[s].style.transform = (s===2)?'scale(1.06)':'scale(1)';
    }
    i++;
    const delay = Math.min(160, 20 + Math.pow(i,1.4));
    if(i < sequence.length) setTimeout(step, delay);
    else {
      slots[2].textContent = surahNames[chosen];
      slots[2].style.animation = 'blink 1s infinite';
      slots[2].style.color = 'gold';
      sel.value = chosen+1;
      fetchTranslation(chosen+1);
      playAudio(chosen+1);
      setTimeout(()=>{ spinBtn.disabled=false; },700);
    }
  }
  step();
});
</script>

</body>
</html>




<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>چت واقعی — نسخه دو پنج ستاره</title>
<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:none;
  font-family:Tahoma,sans-serif;
}

@keyframes borderWave {
  0% {border-color: red;}
  50% {border-color: orange;}
  100% {border-color: red;}
}

#chatContainer{
  position: fixed;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width: calc(50vh * 16 / 9);
  max-width:90%;
  z-index:999;
}

.chat-box{
  display:flex;
  flex-direction:column;
  height:50vh;
  background:#f7fff7;
  overflow:hidden;
  border-radius:8px;
  border:2px solid red;
  animation:borderWave 3s linear infinite;
}

.chat-header{
  padding:4px;
  text-align:center;
  font-weight:700;
  background:#006400;
  color:#ffd700;
  border-bottom:1px solid #004d00;
}
.chat-header .title{display:inline-block;margin-right:6px}
.chat-header .online{font-size:12px;color:#fff}

.chat-messages{
  flex:1;
  overflow-y:auto;
  padding:4px;
  font-size:12px;
}

.chat-input,.name-input-container{
  display:flex;
  padding:2px;
  border-top:1px solid #e9e9e9;
  background:transparent;
}

.chat-input input,.name-input-container input{
  flex:1;
  padding:4px;
  border:1px solid #ccc;
  outline:none;
  border-radius:4px;
  font-size:12px;
}

.chat-input button,.name-input-container button{
  padding:4px 6px;
  margin-left:2px;
  border:none;
  background:#006400;
  color:#ffd700;
  cursor:pointer;
  border-radius:4px;
  font-size:12px;
}
.chat-input button:hover,.name-input-container button:hover{background:#008000}

.message{
  margin:2px 0;
  padding:2px 4px;
  max-width:80%;
  word-break:break-word;
  border-radius:4px;
  font-weight:600;
  font-size:12px;
}

.msg-me{align-self:flex-end;background:#d0ffd0;color:#004d00}
.msg-other{align-self:flex-start;background:#fff0f0;color:#660000}
.meta{display:block;font-size:10px;color:#666;margin-bottom:2px}

.footer-small{
  margin:0;
  padding:2px 4px;
  text-align:center;
  font-size:12px;
  color:#666;
}
.footer-small a{
  color:#125688;
  text-decoration:none;
  font-size:12px;
}
.footer-small img{
  width:16px;
  height:16px;
  vertical-align:middle;
  margin-left:4px;
}
</style>
</head>
<body>

<!-- محتوای اصلی سایت -->
<div id="surahContainer">...سوره‌ها...</div>
<div id="rouletteContainer">...رولت...</div>

<!-- چت نسخه دو پنج ستاره -->
<div id="chatContainer">
  <div class="chat-box">
    <div class="chat-header">
      <span class="title">💬 گپ و گفت</span>
      <span class="online">(<span id="onlineCount">0</span> آنلاین)</span>
    </div>

    <div id="nameArea" class="name-input-container">
      <input id="nameInput" type="text" placeholder="نام خود را وارد کنید..."/>
      <button id="btnRegister">وارد شو</button>
    </div>

    <div class="chat-messages" id="messages"></div>

    <div class="chat-input" id="chatInput" style="display:none">
      <input id="userInput" type="text" placeholder="پیام خود را بنویسید..."/>
      <button onclick="sendMessage()">ارسال</button>
    </div>

    <div class="footer-small">
  
    </div>
  </div>
</div>

<script>
const gun = Gun({peers:['https://gun-manhattan.herokuapp.com/gun','https://gun-us.herokuapp.com/gun']});
const CHAT = gun.get('public_chat_final_small');
const MSGS = CHAT.get('messages');
const USERS = CHAT.get('users');

const nameInput = document.getElementById('nameInput');
const btnRegister = document.getElementById('btnRegister');
const userInput = document.getElementById('userInput');
const messagesEl = document.getElementById('messages');
const onlineCountEl = document.getElementById('onlineCount');
const nameArea = document.getElementById('nameArea');
const chatInput = document.getElementById('chatInput');

let myName=null,myId=null;
const PRESENCE_TTL=20;

function appendMessage(m){
  const div=document.createElement('div');
  const isMe=(m.user===myName);
  div.className='message '+(isMe?'msg-me':'msg-other');
  const meta=document.createElement('div'); meta.className='meta';
  const d=new Date((m.time||Date.now())*1000);
  meta.textContent=(m.user||'ناشناس')+' — '+d.toLocaleTimeString();
  const txt=document.createElement('div'); txt.textContent=m.text||'';
  div.appendChild(meta); div.appendChild(txt);
  messagesEl.appendChild(div);
  messagesEl.scrollTop=messagesEl.scrollHeight;
}

function loadHistory(){
  messagesEl.innerHTML='';
  const temp=[];
  MSGS.map().once(v=>{if(v && v.text) temp.push(v);});
  setTimeout(()=>{temp.sort((a,b)=>(a.time||0)-(b.time||0)); temp.forEach(appendMessage);},300);
}

function listenNewMessages(){MSGS.map().on(v=>{if(v && v.text) appendMessage(v);});}

function sendMessage(){
  const txt=userInput.value.trim(); if(!txt) return;
  MSGS.set({user:myName,text:txt,time:Math.floor(Date.now()/1000)});
  userInput.value='';
}

function register(){
  const name=nameInput.value.trim(); 
  if(!name){alert('نام خود را وارد کنید');return;}

  const existingNames=[];
  USERS.map().once(u=>{if(u && u.name) existingNames.push(u.name);});

  setTimeout(()=>{
    if(existingNames.includes(name)){
      alert('این نام قبلاً استفاده شده است. لطفاً نام دیگری وارد کنید.');
      nameInput.value='';
      return;
    }

    myId='u_'+Math.random().toString(36).slice(2,10);
    myName=name;
    USERS.get(myId).put({name:myName,time:Math.floor(Date.now()/1000)});
    nameArea.style.display='none';
    chatInput.style.display='flex';
    loadHistory(); listenNewMessages();
    userInput.focus();
    setInterval(()=>{USERS.get(myId).put({name:myName,time:Math.floor(Date.now()/1000)});},(PRESENCE_TTL/2)*1000);
    updateOnline();
  },300);
}

function updateOnline(){
  const arr=[];
  USERS.map().once(u=>{if(u && u.name && u.time) arr.push({name:u.name,time:u.time});});
  setTimeout(()=>{
    const now=Math.floor(Date.now()/1000);
    const active=arr.filter(x=>(now-(x.time||0))<=PRESENCE_TTL);
    const seen=new Set(); const unique=[];
    active.forEach(a=>{if(!seen.has(a.name)){seen.add(a.name);unique.push(a);} });
    onlineCountEl.textContent=unique.length;
  },300);
}

setInterval(updateOnline,3000);
window.addEventListener('beforeunload',()=>{if(myId) USERS.get(myId).put(null);});
btnRegister.addEventListener('click',register);
userInput.addEventListener('keydown',e=>{if(e.key==='Enter')sendMessage();});
nameInput.addEventListener('keydown',e=>{if(e.key==='Enter')register();});
</script>
</body>


  <a href="https://www.instagram.com/itsbehnamz/" target="_blank" rel="noopener noreferrer">
  <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
  صفحه اینستاگرام سازنده
</a>


</html>


